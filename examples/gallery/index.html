<!DOCTYPE html>

<!-- Copyright Â© SixtyFPS GmbH <info@slint.dev> -->
<!-- SPDX-License-Identifier: MIT -->

<html>
  <head>
    <title>Slint Material 3 Gallery  (Web Assembly version)</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        overflow: hidden;
      }

      canvas {
        width: 100dvw !important;
        height: 100dvh !important;
        background: black;
      }
    </style>
  </head>
  <body>
    <!-- canvas required by the Slint runtime -->
    <div style="position: fixed; inset: 0; width: 100dvw; height: 100dvh; overflow: auto; z-index: 0;">
      <div id="frame-container" style="margin: 20px; position: relative; width: calc(100dvw - 40px); height: auto;">
        <div id="canvas-container" style="position: relative; width: 93.2%; height: auto; margin: 3% auto 3% auto; z-index: 0;">
          <canvas id="canvas" style="display: block; width: 100%; background: black;"></canvas>
        </div>
        <img id="frame-img" src="./frame-tablet.png" alt="Tablet Frame" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1;" />
      </div>
    </div>
    <script type="module">
      // Dynamically set canvas height to 10:7 aspect ratio and frame-container height to match frame image aspect ratio
      const frameImg = document.getElementById('frame-img');
      const canvas = document.getElementById('canvas');
      const container = document.getElementById('canvas-container');
      const frameContainer = document.getElementById('frame-container');
      function resizeCanvas() {
        const width = frameContainer.clientWidth;
        // Set frame-container height to match frame image aspect ratio (landscape tablet, e.g. 10:7)
        const frameAspect = 10 / 7;
        const frameHeight = width / frameAspect;
        frameContainer.style.height = frameHeight + 'px';
        // Now set canvas-container and canvas as before
        const canvasWidth = container.clientWidth;
        const canvasAspect = 10 / 7;
        const canvasHeight = canvasWidth / canvasAspect;
        container.style.height = canvasHeight + 'px';
        canvas.style.width = canvasWidth + 'px';
        canvas.style.height = canvasHeight + 'px';
        canvas.width = canvasWidth;
        canvas.height = canvasHeight;
      }
      window.addEventListener('resize', resizeCanvas);
      resizeCanvas();
      // import the generated file.
      import init from "./pkg/gallery_lib.js";
      init();
    </script>
  </body>
</html>
